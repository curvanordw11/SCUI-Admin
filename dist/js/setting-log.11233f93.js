"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[5840,511],{5030:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var t=a(6252);const r={class:"left-panel"},o=(0,t._)("div",{class:"right-panel"},null,-1);function i(e,l,a,i,n,d){const p=(0,t.up)("el-tree"),u=(0,t.up)("el-aside"),c=(0,t.up)("el-date-picker"),s=(0,t.up)("el-header"),f=(0,t.up)("scEcharts"),w=(0,t.up)("el-icon-circle-close-filled"),h=(0,t.up)("el-icon"),m=(0,t.up)("el-icon-warning-filled"),b=(0,t.up)("el-icon-info-filled"),g=(0,t.up)("el-table-column"),W=(0,t.up)("scTable"),y=(0,t.up)("el-main"),k=(0,t.up)("el-container"),x=(0,t.up)("info"),_=(0,t.up)("el-drawer");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{width:"220px"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{ref:"category",class:"menu","node-key":"label",data:n.category,"default-expanded-keys":["系统日志"],"current-node-key":"系统日志","highlight-current":!0,"expand-on-click-node":!1},null,8,["data"])])),_:1}),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"nopadding"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(c,{modelValue:n.date,"onUpdate:modelValue":l[0]||(l[0]=e=>n.date=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),o])),_:1}),(0,t.Wm)(s,{style:{height:"150px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{height:"100%",option:n.logsChartOption},null,8,["option"])])),_:1}),(0,t.Wm)(y,{class:"nopadding"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{ref:"table",apiObj:n.apiObj,stripe:"",highlightCurrentRow:"",onRowClick:d.rowClick},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"级别",prop:"level",width:"60"},{default:(0,t.w5)((e=>["error"==e.row.level?((0,t.wg)(),(0,t.j4)(h,{key:0,style:{color:"#F56C6C"}},{default:(0,t.w5)((()=>[(0,t.Wm)(w)])),_:1})):(0,t.kq)("",!0),"warn"==e.row.level?((0,t.wg)(),(0,t.j4)(h,{key:1,style:{color:"#E6A23C"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m)])),_:1})):(0,t.kq)("",!0),"info"==e.row.level?((0,t.wg)(),(0,t.j4)(h,{key:2,style:{color:"#409EFF"}},{default:(0,t.w5)((()=>[(0,t.Wm)(b)])),_:1})):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(g,{label:"ID",prop:"id",width:"180"}),(0,t.Wm)(g,{label:"日志名",prop:"name",width:"150"}),(0,t.Wm)(g,{label:"请求接口",prop:"url",width:"150"}),(0,t.Wm)(g,{label:"请求方法",prop:"type",width:"150"}),(0,t.Wm)(g,{label:"用户",prop:"user",width:"150"}),(0,t.Wm)(g,{label:"客户端IP",prop:"cip",width:"150"}),(0,t.Wm)(g,{label:"日志时间",prop:"time",width:"170"})])),_:1},8,["apiObj","onRowClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(_,{modelValue:n.infoDrawer,"onUpdate:modelValue":l[1]||(l[1]=e=>n.infoDrawer=e),title:"日志详情",size:600,"destroy-on-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{ref:"info"},null,512)])),_:1},8,["modelValue"])],64)}var n=a(8977),d=a(2104),p={name:"log",components:{info:n["default"],scEcharts:d.Z},data(){return{infoDrawer:!1,logsChartOption:{color:["#409eff","#e6a23c","#f56c6c"],grid:{top:"0px",left:"10px",right:"10px",bottom:"0px"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:["2021-07-01","2021-07-02","2021-07-03","2021-07-04","2021-07-05","2021-07-06","2021-07-07","2021-07-08","2021-07-09","2021-07-10","2021-07-11","2021-07-12","2021-07-13","2021-07-14","2021-07-15"]},yAxis:{show:!1,type:"value"},series:[{data:[120,200,150,80,70,110,130,120,200,150,80,70,110,130,70,110],type:"bar",stack:"log",barWidth:"15px"},{data:[15,26,7,12,13,9,21,15,26,7,12,13,9,21,12,3],type:"bar",stack:"log",barWidth:"15px"},{data:[0,0,0,120,0,0,0,0,0,0,0,0,0,0,0,0],type:"bar",stack:"log",barWidth:"15px"}]},category:[{label:"系统日志",children:[{label:"debug"},{label:"info"},{label:"warn"},{label:"error"},{label:"fatal"}]},{label:"应用日志",children:[{label:"selfHelp"},{label:"WechatApp"}]}],date:[],apiObj:this.$API.system.log.list,search:{keyword:""}}},methods:{upsearch(){},rowClick(e){this.infoDrawer=!0,this.$nextTick((()=>{this.$refs.info.setData(e)}))}}},u=a(3744);const c=(0,u.Z)(p,[["render",i]]);var s=c}}]);